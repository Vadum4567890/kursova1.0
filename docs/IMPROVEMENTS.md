# –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –±–µ–∫–µ–Ω–¥—É

## ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### 1. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö (Validation)**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —á–µ—Ä–µ–∑ middleware
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è ID –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞—Ç (—Ñ–æ—Ä–º–∞—Ç, –ª–æ–≥—ñ–∫–∞)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è enum —Ç–∏–ø—ñ–≤ (CarType, CarStatus, RentalStatus)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–∏—Ö –Ω–æ–º–µ—Ä—ñ–≤
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–æ–∑–∏—Ç–∏–≤–Ω–∏—Ö —á–∏—Å–µ–ª
- ‚úÖ Sanitization –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

**–§–∞–π–ª–∏:**
- `backend/src/middleware/validation.ts`

**–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```typescript
router.post('/', validateCarData, carController.createCar);
router.post('/', validateClientData, clientController.createClient);
router.post('/', validateRentalData, rentalController.createRental);
```

### 2. **–ü–∞–≥—ñ–Ω–∞—Ü—ñ—è (Pagination)**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è –¥–ª—è —Å–ø–∏—Å–∫—ñ–≤
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏: `?page=1&limit=10`
- ‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å –º—ñ—Å—Ç–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω—ñ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó

**–ü—Ä–∏–∫–ª–∞–¥:**
```
GET /api/cars?page=1&limit=10
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": [...],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 50,
    "totalPages": 5,
    "hasNext": true,
    "hasPrev": false
  }
}
```

### 3. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è (Filtering)**
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ –∫—ñ–ª—å–∫–æ–º–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –ü–æ—à—É–∫ –ø–æ —Ç–µ–∫—Å—Ç—É (ILIKE –¥–ª—è case-insensitive)
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ enum –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
```
GET /api/cars?type=economy&status=available&brand=Toyota
GET /api/cars?model=Corolla
```

### 4. **–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (Sorting)**
- ‚úÖ –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –±—É–¥—å-—è–∫–∏–º –ø–æ–ª–µ–º
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ ASC/DESC

**–ü—Ä–∏–∫–ª–∞–¥:**
```
GET /api/cars?sort=pricePerDay:desc
GET /api/cars?sort=year:asc
```

### 5. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (Error Handling)**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π error handler
- ‚úÖ –ö–ª–∞—Å AppError –¥–ª—è –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ development —Ä–µ–∂–∏–º—ñ
- ‚úÖ 404 handler –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–∏—Ö —Ä–æ—É—Ç—ñ–≤

**–§–∞–π–ª–∏:**
- `backend/src/middleware/errorHandler.ts`

**–ü—Ä–∏–∫–ª–∞–¥:**
```typescript
throw new AppError('Car not found', 404);
```

### 6. **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è ID**
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ NaN
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø–æ–∑–∏—Ç–∏–≤–Ω—ñ —á–∏—Å–ª–∞
- ‚úÖ Middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

### 7. **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞—Ç**
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É –¥–∞—Ç–∏
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–∫–∏ (startDate < endDate)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –º–∏–Ω—É–ª—ñ –¥–∞—Ç–∏

## üìã –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è + –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è + –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
```
GET /api/cars?page=1&limit=10&type=economy&status=available&sort=pricePerDay:asc
```

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ
```json
POST /api/cars
{
  "brand": "Toyota",
  "model": "Corolla",
  "year": 2020,
  "pricePerDay": 800,
  "deposit": 3000
}
```

–Ø–∫—â–æ –ø–æ–ª–µ –≤—ñ–¥—Å—É—Ç–Ω—î –∞–±–æ –Ω–µ–≤–∞–ª—ñ–¥–Ω–µ - –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è 400 –∑ –æ–ø–∏—Å–æ–º –ø–æ–º–∏–ª–∫–∏.

## üîÑ Backward Compatibility

–í—Å—ñ –∑–º—ñ–Ω–∏ –∑–≤–æ—Ä–æ—Ç–Ω–æ —Å—É–º—ñ—Å–Ω—ñ:
- –Ø–∫—â–æ –Ω–µ –ø–µ—Ä–µ–¥–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó - –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –≤—Å—ñ –∑–∞–ø–∏—Å–∏
- –°—Ç–∞—Ä—ñ endpoints –ø—Ä–∞—Ü—é—é—Ç—å —è–∫ —Ä–∞–Ω—ñ—à–µ

## üìù –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

1. **Rate Limiting** - –æ–±–º–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤
2. **Caching** - –∫–µ—à—É–≤–∞–Ω–Ω—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
3. **Request Logging** - –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤
4. **API Versioning** - –≤–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è API
5. **Authentication/Authorization** - –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

